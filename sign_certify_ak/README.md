


Certify a Child Key with an AK.

1. Generate EK
2. Generate AK
3. Generate Child Key (k1) of EK that is unrestricted (`tpm2.FlagRestricted`)
4. Certify `k1` with AK
5. Sign data with `k1`
6. Verify Certification  (note, [go-tpm/issues/262](https://github.com/google/go-tpm/issues/262))

At step 6, since you confirmed AK signed k1 and if you trust AK, you can trust the signature done by `k1` in step 4


>> TODO: it would be better if `k1` is a child of AK but i could not figure that part out....


```bash
# go run main.go 

2020/05/22 15:11:37 ======= Init  ========
2020/05/22 15:11:37 0 handles flushed
2020/05/22 15:11:37 PCR 23 Value 0000000000000000000000000000000000000000000000000000000000000000 
2020/05/22 15:11:37 ======= createPrimary (EK) ========
2020/05/22 15:11:37 ======= CreateKeyUsingAuth ========
2020/05/22 15:11:37 akPub: 0001000b00050072000000100014000b0800000000000100c9c724599c7ee1a5194034a6b57b4b64e7a2a389700b6df092292f9d82c12e9319a2de25ecf324710fbf2ef1046e4869b68b00a8cfa7c69cd9872d3014504b02b242c585a3917d3c4a1c24e3998657610fcba476ede5acc48d36f1dc442029583e72b4d0fc3512b37bff5f7bb0779a07a2f329026b49bcccf3cc59b8c89f8931b1ceb718bfcdc08d23abf39d3ab971a4a767e11a19c6613b1bcb64c66df54945eb913e82ee8c07c9fdbd5942e74f87ef7f9c316ba5bfc6691cbe8c0ed00f39e832c1550869bcfe4d215ccbdf7d127030b47a29da7c49c6b048630463d1389b8703fd794192a81a11426375b59476882369ece351142ae45c74b3d9d8f4fa7659,
2020/05/22 15:11:37 akPriv: 0020a8162156e63c95ea9018560ad2c04593b20e6794298e3845386c1ff005178dd20010dce44b2163b2ad3a3aba5f268df352a95944a5b017eefdaa8dbf902eeecec8f60e189a166528954139cbc8f43429ce4f8c189c164de455c43c2ce2dbabe045c33573c0b8200d36fabe1269e7565029efeee5fe08dac5881aa3a63a35c3e8fc5a11ebcf6fe00f3d2215d0e9f2c071ac6390d1dab50ec3d51b3d5e3f05e2a3bd4b7df72c6439e58a1af01917c6112a2833c21a79a27869666a4425b4bc984390fd5327cd1a2edb81faacbc1376951252075a06e0bc69c914502236,
2020/05/22 15:11:37 akPub PEM 
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAycckWZx+4aUZQDSmtXtL
ZOeio4lwC23wkikvnYLBLpMZot4l7PMkcQ+/LvEEbkhptosAqM+nxpzZhy0wFFBL
ArJCxYWjkX08Shwk45mGV2EPy6R27eWsxI028dxEIClYPnK00Pw1ErN7/197sHea
B6LzKQJrSbzM88xZuMifiTGxzrcYv83AjSOr8506uXGkp2fhGhnGYTsby2TGbfVJ
ReuRPoLujAfJ/b1ZQudPh+9/nDFrpb/GaRy+jA7QDznoMsFVCGm8/k0hXMvffRJw
MLR6Kdp8ScawSGMEY9E4m4cD/XlBkqgaEUJjdbWUdogjaezjURQq5Fx0s9nY9Pp2
WQIDAQAB
-----END PUBLIC KEY-----
2020/05/22 15:11:37 AK keyName: 000b476fccb12dde823f1def3a2ea705a466ba6c3a653611281a72e1659c08f98e38,
2020/05/22 15:11:37 ======= CreateKeyUsingAuthUnrestricted ========
2020/05/22 15:11:37 Unrestricted ukPub: 0001000b00040072000000100014000b0800000000000100d87acc185281be3236a703d632ba82994599eadb7a565aae7026cf098f599ed51f34717c6e86127da18a0ef50210c9c5ebd8b4ffcaecf8804bdfb011b4587aae5e20bd6263dee8638bf52bb187d91aab952d943c476454612da541b46d749e0ad070c0f22d2b99b16dddfc06c45d761652070c16f08f38ecb4bf4a3d40a4ea4da43eb2198f6c107a19d442d2b53fd03b2160e6e437b1d7174d13d8bb63681130f7429c2d69530272e744b7b335f322e07295fac9772844d0f0222427798dc6b1067749503b3ff79abd90d307155727a1c3896a5d1601a781b53344e2a8cda558022f8432ce9f65a386256e2553f523ceb3e093c3db8747516e76450fe728a739,
2020/05/22 15:11:37 Unrestricted ukPriv: 0020574190267e2182a12ac4a34b8f3fd622deda158bd7e5f5ab01746d44e17aa7980010b6d09bbb31f30fd78c879a95c39836f10c02527627be5ac68701bb106f56cff39beb574d1b40e1c8deafd766244a048265e4327850b25cd726de4c0ba37e171a10bb63e876926f42995701fda70df2c9d3aff00929b865915a218c83ada59296eff882db2a8e70c8f5c53d566dfcf23b14afd94932a7d3333c997f4888d65df8d362f4a813e28c46f8df444b587001b3e09683377b2a259d418be0a851e7ed9c0632ecb9d14c20293e0d2dfeb8f611b36b2190d799302503eab9,
2020/05/22 15:11:37 ukeyName: 000ba0f558bd8a954cead287be2d51bf91a0766306e4a42f8b4a7ae8ccd2b4fd14c0,
2020/05/22 15:11:37 Certify Attestation: ff54434780170022000b30adc87a81b242c130e596c6f9f022ed3785bdffbcc05aa72460eaf6a1bbd562000000000000af2ad8420000002c000000000120160511001628000022000ba0f558bd8a954cead287be2d51bf91a0766306e4a42f8b4a7ae8ccd2b4fd14c00022000b0ce87a7d14021945d9c47022f7c7ab1e767764f017518d0be2b551bb0b026a33,
2020/05/22 15:11:37 Certify Signature: 18a67b0da433c1dd31caef173dbb16a0ed40523e7d88e41293eef6d5a5f82d3eddfec240e7e84a92cb5786fe568724eec7bd7fac50861f0cfd9a7a9b1cbe68a5b44a26dcbcce823879eeb1f7f271fb4f0175785013d79a35c7cfaf6ea219cbe35bf26990f99e4c7744efcd01788b741f1d68c7719282aeb550c9d9ed87c1c3316b9c857a3087452c221df3de6d745fe7baa9d5de046ce4f383b963bbcdbfe150c7a1549398c796d9346e431b6e04ec400b67faf329dc44e88716509f2241e1e7c56fbac7f41d662093a297c38bc81039b68c856a8c2f8a6084e2ce309c2b09194dba9f7599154573b7bdd9a124afa0942011b8f1fbc3a9627da86f877b0aad47,
2020/05/22 15:11:37 Signature data:  Tp1ALWE3J3pF9dBiQDo5RZVXsjd+YbnhiDISOmSIejPHh4C9PO3B81KgbVUbH/wwgbf/2+Y2uK8AAH2eJh+OiqiECxHhnlCLpQPk8ZyuVjvWVF/HjIvLsIlDDcJS/t4tPmDPMDDAZLwN6NvS/pq/42yUgxA0Iz+bzA4u/uwmx0XW8iuQrHZrODRtjfXuLIBnfw70BcLoRWna9FtyGF9ZLYRNmPOUQmdoER0I3WZdEI8vsb4PIqpHSvJbpSst9RIDXXBEuAFCsoDPuu2VWVG2Ij96RQQMA+1vih7zcoVQvWHRrTJwXH1EuLwHF7o7zuE6D0wT16uZcUF5p5VLiApEaA
2020/05/22 15:11:37      Read and Decode (attestion)
2020/05/22 15:11:37      Attestation att.AttestedCertifyInfo.QualifiedName: 0ce87a7d14021945d9c47022f7c7ab1e767764f017518d0be2b551bb0b026a33
2020/05/22 15:11:37      Decoding PublicKey for AK ========
2020/05/22 15:11:37 Attestation Verified

```